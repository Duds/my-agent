{
  "id": "PBI-037",
  "title": "Agent Creation Review UI",
  "priority": "C",
  "phase": "Advanced Features",
  "status": "done",
  "detailed_design": {
    "module": "frontend",
    "description": "Optional UI for reviewing and editing LLM-generated agent code before registration. When agent generation produces code, user can open a review dialog to inspect, edit, and approve before the agent is added to the Automation Hub. Complements the chat-based flow in PBI-036.",
    "affected_files": [
      "frontend/src/components/automation/agent-code-review-dialog.tsx (new)",
      "frontend/src/components/chat-interface.tsx",
      "frontend/src/lib/api-client.ts"
    ],
    "solution": "1. When chat returns AgentGenerated response (code + validation status), show 'Review & Register' option. 2. AgentCodeReviewDialog: code editor (read-only or editable), validation messages, Approve/Reject buttons. 3. Approve triggers POST /api/agents/register with code; agent added to Automation Hub. 4. Reject returns to chat; user can refine request."
  },
  "acceptance_criteria": [
    "Agent generation response includes 'Review & Register' action when code is valid",
    "Review dialog shows generated code with syntax highlighting",
    "User can edit code before approving (re-validation on edit)",
    "Approve registers agent and shows confirmation",
    "Reject returns to chat for refinement"
  ],
  "user_stories": [
    {
      "story": "As a user, I want to review generated agent code before it is registered."
    },
    {
      "story": "As a user, I want to make small edits to generated code before approving."
    }
  ],
  "technical_notes": {
    "current_issue": "No UI to review generated code; registration could be automatic",
    "risk": "LOW",
    "estimated_effort": "Small (1-2 days)",
    "dependencies": ["PBI-036 Agent Code Generation & Registration"],
    "note": "Could Have; PBI-036 can ship with auto-register on valid code; this adds optional review step"
  }
}
